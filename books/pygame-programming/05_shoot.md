---
title: 弾を発射しよう
---
キャラクターに弾を発射させます。弾の発射は以下の仕様とします。

- マウスの左クリックを押した時に弾を発射する
- 弾を発射する

## 手順
### 弾の画像を追加しよう
1. 弾の画像を追加します。ここでは、プレイヤーキャラクターと同じく[ドッタウン](https://dotown.maeda-design-room.net/)から[ヘ音記号](https://dotown.maeda-design-room.net/3200/)の画像を使っています。
2. ダウンロードしたファイルの名前を"bullet.png"に変更してください。
3. "bullet.png"をokeikoフォルダの中の"imagesフォルダへ移動します。

### 発射音の音声データを追加しよう
1. 発射音の音声データを追加します。ここでは[魔王魂](https://maou.audio/)というサイトの[戦闘効果音](https://maou.audio/category/se/se-battle/)から戦闘17を使わせていただきました。
2. okeikoフォルダの中に"sounds"フォルダを作成します。
3. ダウンロードしたファイルをsoundsフォルダへ移動します。

### 弾を追加しよう
> プログラムの16〜19行目です。
プレイヤーキャラクターの時と同じように、弾の画像を読み込みます。今回は向きを設定していませんので、pg.transform.flipは使っていません。

弾のY座標を-10としています。これは発射前には表示させない（画面の外にある）ようにするためと、Y座標が0未満なら弾が発射されていないことを判断するためです。

### マウスをクリックしたら弾を発射しよう
> プログラムの50〜60行目です。
- 50行目：pg.mouse.get_pressed()はマウスのボタンが押されているかどうかを調べる命令です。()の中には調べたいボタンの番号を入れます。0は左ボタン、1は中央ボタン、2は右ボタンです。今回は左ボタンが押されているかどうかを調べています。結果は変数mouseに入ります。
- 52行目：fire[0]はマウスの左ボタンが押されているかどうかを表します。押されている場合はTrue、押されていない場合はFalseになります。かつ弾のY座標が0未満の場合は、弾が発射されていないと判断して発射の処理を行います。このプログラムでは、弾は同時にひとつしか発射できません。
- 54行目：弾のX座標を設定しています。
- 55行目：弾のY座標を設定しています。
- 56行目：発射音を再生します。
- 57行目：弾のY座標が0以上（発射中）だったら弾を画面の上に移動します。
- 58行目：弾を画面に表示します。

## プログラムを入力しよう
1. 前回作成した"game.py"を開きます。
1. 以下のコードの赤い枠の中を"game.py"に追加していきましょう。
1. 入力したら保存します。保存の操作は、ChromebookとWindowsの方は"Ctrl" + "S"、Macの方は"Command" + "S"です。プログラムの保存は最後にまとめてやるのではなく、ある程度入力したら保存するの方が良いです。もし入力途中でトラブルが起こったらせっかく入力したプログラムが消えてしまう可能性があります。

画像をクリックすると拡大表示されます（[こちらをクリックすると別ウインドウでオリジナルのソースコードが表示できます](https://github.com/kwaka1208/resources/blob/main/pygame/game05.py)）
[![](https://raw.githubusercontent.com/kwaka1208/resources/main/pygame/game05.png)](https://raw.githubusercontent.com/kwaka1208/resources/main/pygame/game05.png)

## 実行してみよう
<<<<<<< HEAD
プログラムの入力ができたら、プログラムを実行してみましょう。
=======
プログラムの入力ができたら、プログラムを実行してます。以下の手順を参考にしてください。

### Chromebookの方
1. ターミナルを起動します。
1. cd pygameと入力してEnterキーを押します。
1. python3 game.pyと入力してEnterキーを押します。

### Windowsの方
1. コマンドプロンプトを起動します。
1. cd Documentsと入力してEnterキーを押します。
1. cd pygameと入力してEnterキーを押します。
1. python game.pyと入力してEnterキーを押します。

### Macの方
1. ターミナルを起動します。
1. cd Documentsと入力してEnterキーを押します。
1. cd pygameと入力してEnterキーを押します。
1. python3 game.pyと入力してEnterキーを押します。
>>>>>>> 03f1854fa2b2c27eae6704ccf77922a545fed8a2

## 考えてみよう
- 54行目で弾のX座標を計算していますが、なぜこのような計算を行なっているのか考えてみましょう。


